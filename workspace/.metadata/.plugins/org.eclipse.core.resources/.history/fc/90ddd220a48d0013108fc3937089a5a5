package com.ojs.capabilities.testCapability;




import org.json.JSONArray;
import org.json.JSONObject;

import com.ojs.OrchestratorJsActivity;
import com.ojs.OrchestratorJsActivity.OJSEventReceiver;

import android.annotation.SuppressLint;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;

public class TestCapability {


	private static Context applicationContext;
	public static boolean canContinue;	
	public void initCapability(Context applicationContext) {
		TestCapability.applicationContext = applicationContext;
	}



	@SuppressLint("NewApi")
	public Object throwException() throws Exception {

		if(true)
			throw(new Exception("voi rahma"));
		
		return null;
	}
	
	@SuppressLint("NewApi")
	public Object test() throws Exception {
		Log.d(OrchestratorJsActivity.TAG, "test foo1");
		Intent i = new Intent(TestCapability.applicationContext, TestCapabilityActivity.class);
		i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
		Log.d(OrchestratorJsActivity.TAG, "test foo2");
		TestCapability.applicationContext.startActivity(i);
		
		Log.d(OrchestratorJsActivity.TAG, "waiting begins");
		
		while ( !TestCapability.canContinue ) {
			Thread.sleep(500);
		}
		
		Log.d(OrchestratorJsActivity.TAG, "waiting ends");
		
		
		return false;
	}

	
	
    
    
	public static IntentFilter testCapabilityReceiverFilter = new IntentFilter("testCapabilityReceiverFilter");
	private BroadcastReceiver testCapabilityReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
        	Log.d(OrchestratorJsActivity.TAG, "got test activity event");
        }
    };
	
}










