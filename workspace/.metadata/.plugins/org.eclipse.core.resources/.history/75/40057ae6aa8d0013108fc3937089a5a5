package com.ojs.capabilities.dialogCapability;

import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONObject;

import com.ojs.OrchestratorJsActivity;
import com.ojs.capabilities.testCapability.TestCapability;
import com.ojs.capabilities.testCapability.TestCapabilityActivity;

import android.content.Context;
import android.content.Intent;
import android.util.Log;


public class DialogCapability {
	
	private static Context applicationContext_;
	private static String dialogChoice;

	public void initCapability( Context applicationContext ) {
		DialogCapability.applicationContext_ = applicationContext;
		
	}

	public static void setDialogChoice(String choice) {
		DialogCapability.dialogChoice = choice;
	}
	
	public void showDialog( String title, JSONArray dialogChoices, int validTime) throws Exception {
		
		DialogCapability.dialogChoice = "FOO";
		
		
		Intent i = new Intent(DialogCapability.applicationContext_, DialogCapabilityActivity.class);
		i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
		
		ArrayList<String>choices = new ArrayList<String>();
		for (int index = 0; index < dialogChoices.length(); index++) {
			String choice = dialogChoices.getString(index);
			choices.add(choice);
		}
		i.putStringArrayListExtra("dialogChoices", choices);
		i.putExtra("dialogTitle", title);
		i.putExtra("dialogValideTime", validTime);
		
		Log.d(OrchestratorJsActivity.TAG, "test foo2");
		
		DialogCapability.applicationContext_.startActivity(i);

	}

	public String getDialogChoice() {
		return DialogCapability.dialogChoice;
	}
	
}
